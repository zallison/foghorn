variables:
  BAD_DOMAIN: example.internal
  TTL: 300
  DATABASES: ./config/var
  STUDENTS:
  - 192.168.1.0/24
  - 10.0.0.0/8
  - 2001:db8::/32
  STAFF:
  - 192.168.2.0/24
  - 172.16.16.16/32
  BLOCKED_IPS:
  - ip: 192.168.27.0/24
    action: remove
  - ip: 1.2.3.4
    action: replace
    replace_with: 127.0.0.1
upstreams:
  endpoints:
  - host: 1.1.1.1
    port: 53
  - host: 8.8.8.8
    port: 53
plugins:
- type: greylist
  config:
    db_path: ${DATABASES}/greylist.db
- type: filter
  config:
    targets: $STAFF
    db_path: ${DATABASES}/malware-blocklist.db
    ttl: ${TTL}
- type: filter
  config:
    targets: $STUDENTS
    db_path: ${DATABASES}/strict-blocklist.db
    ttl: ${TTL}
    blocked_domains:
    - ads.${BAD_DOMAIN}
    - tracker.${BAD_DOMAIN}
    blocked_ips:
    - $BLOCKED_IPS
    - ip: 4.3.2.1
      action: remove
server:
  listen:
    udp:
      enabled: true
      host: 127.0.0.1
      port: 5353
