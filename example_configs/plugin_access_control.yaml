# Foghorn example: Access Control (ACL) plugin
# Minimal runnable server config focusing on ACL behavior.

listen:
  udp:
    enabled: true
    host: 127.0.0.1
    port: 5353
  tcp:
    enabled: false
  dot:
    enabled: false

upstreams:
  - { host: 1.1.1.1, port: 53 }
  - { host: 8.8.8.8, port: 53 }

dnssec:
  mode: passthrough
  validation: upstream_ad
  udp_payload_size: 1232

logging:
  level: info

plugins:
  - module: acl  # AccessControlPlugin alias
    # pre_priority: 10  # optional: run early in the pre-processing chain
    config:
      # default policy controls what happens when a client is not matched by allow/deny lists.
      # Options: allow | deny
      default: allow

      # Explicit allowlist for client IPs/subnets
      allow:
        - 192.0.2.0/24     # documentation IPv4 subnet (allowed)
        - 10.0.0.0/8       # RFC1918 example internal subnet
        # - 2001:db8::/32  # example IPv6 documentation block

      # Explicit blocklist for client IPs/subnets
      deny:
        - 203.0.113.0/24   # documentation IPv4 subnet (denied)
        # - 2001:db8:ffff::/48 # example IPv6 subnet to deny

      # Notes:
      # - If a client matches both allow and deny, deny wins.
      # - With default: deny, only explicitly allowed clients can query.
      # - IPv6 CIDR ranges are supported.
