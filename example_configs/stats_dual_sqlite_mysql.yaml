listen:
  host: 127.0.0.1
  port: 5354

upstreams:
  - host: 1.1.1.1
    port: 53

statistics:
  enabled: true
  interval_seconds: 300
  reset_on_log: false
  include_qtype_breakdown: true
  include_top_clients: true
  include_top_domains: true
  top_n: 10
  track_latency: true
  force_rebuild: false

  persistence:
    enabled: true
    # Legacy single-backend configuration kept for schema compatibility.
    db_path: ./config/var/stats.db
    batch_writes: true
    batch_time_sec: 15.0
    batch_max_size: 1000

    # Example multi-backend configuration (not yet reflected in JSON schema):
    # Use both SQLite and MySQL backends:
    #   - Writes go to both backends.
    #   - Reads (counts, query_log, warm-load) use the primary backend.
    # primary_backend: mysql_analytics
    # backends:
    #   - name: sqlite_mirror
    #     backend: sqlite
    #     config:
    #       db_path: ./config/var/stats.db
    #       batch_writes: true
    #       batch_time_sec: 15.0
    #       batch_max_size: 1000
    #   - name: mysql_analytics
    #     backend: mysql
    #     config:
    #       host: 127.0.0.1
    #       port: 3306
    #       user: foghorn
    #       password: change-me
    #       database: foghorn_stats

webserver:
  enabled: true
  host: 127.0.0.1
  port: 5380
  logs:
    buffer_size: 500
