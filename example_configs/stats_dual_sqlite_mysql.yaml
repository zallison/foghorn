listen:
  host: 127.0.0.1
  port: 5354

upstreams:
  - host: 1.1.1.1
    port: 53

statistics:
  enabled: true
  interval_seconds: 300
  reset_on_log: false
  include_qtype_breakdown: true
  include_top_clients: true
  include_top_domains: true
  top_n: 10
  track_latency: true
  force_rebuild: false

  persistence:
    enabled: true
    # Legacy single-backend configuration (SQLite) remains the default and is
    # the only shape currently described by the JSON Schema.
    db_path: ./config/var/stats.db
    batch_writes: true
    batch_time_sec: 15.0
    batch_max_size: 1000

    # Example multi-backend configuration using the new loader. Writes go to all
    # backends; reads use the primary backend selected via primary_backend,
    # environment, or CLI. This is commented-out to keep this example
    # schema-valid; to enable, uncomment and remove the legacy db_path config.
    #
    # primary_backend: mysql_analytics
    # backends:
    #   - name: sqlite_mirror
    #     backend: sqlite
    #     config:
    #       db_path: ./config/var/stats.db
    #       batch_writes: true
    #       batch_time_sec: 15.0
    #       batch_max_size: 1000
    #   - name: mysql_analytics
    #     backend: mysql
    #     config:
    #       host: 127.0.0.1
    #       port: 3306
    #       user: foghorn
    #       password: change-me
    #       database: foghorn_stats

webserver:
  enabled: true
  host: 127.0.0.1
  port: 5380
  logs:
    buffer_size: 500
