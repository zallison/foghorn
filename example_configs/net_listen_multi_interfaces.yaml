# Foghorn template: multiple interfaces (run multiple instances)
# Current server binds a single UDP endpoint per process.
# Use separate config files and run multiple foghorn processes to listen on
# different interfaces/ports simultaneously.
#
# Copy one of the blocks below into its own file and start another process for the other.
# Example:
#   foghorn --config example_configs/net_listen_multi_if_instance1.yaml
#   foghorn --config example_configs/net_listen_multi_if_instance2.yaml

# --- Instance 1: bind to LAN interface 192.0.2.10:5353
listen:
  udp:
    enabled: true
    host: 192.0.2.10   # replace with your LAN IP
    port: 5353
  tcp:
    enabled: false
  dot:
    enabled: false

upstreams:
  - host: 1.1.1.1
    port: 53
  - host: 8.8.8.8
    port: 53

dnssec:
  mode: passthrough
  validation: upstream_ad
  udp_payload_size: 1232

foghorn:
  timeout_ms: 2000
  upstream_strategy: failover
  upstream_max_concurrent: 1
  use_asyncio: true
logging:
  level: info

# --- Instance 2: bind to loopback 127.0.0.1:5354 (separate process)
# listen:
#   udp:
#     enabled: true
#     host: 127.0.0.1
#     port: 5354
#   tcp:
#     enabled: false
#   dot:
#     enabled: false
#
# upstream:
#   - host: 9.9.9.9
#     port: 53
#
# dnssec:
#   mode: passthrough
#   validation: upstream_ad
#   udp_payload_size: 1232
#
# foghorn:
#   timeout_ms: 1500
#   upstream_strategy: failover
#   upstream_max_concurrent: 1
#   use_asyncio: true
# logging:
#   level: info
