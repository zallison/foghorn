# Foghorn example: /etc/hosts override plugin
# This plugin answers from the hosts file for A records (IPv4).

listen:
  udp:
    enabled: true
    host: 127.0.0.1
    port: 5353
  tcp:
    enabled: false
  dot:
    enabled: false

upstreams:
  - host: 1.1.1.1
    port: 53
  - host: 8.8.8.8
    port: 53

dnssec:
  mode: passthrough
  validation: upstream_ad
  udp_payload_size: 1232

logging:
  level: info

plugins:
  # Optional: resolve container hostnames before consulting /etc/hosts.
  - module: docker-hosts
    config:
      endpoints:
        - unix:///var/run/docker.sock
        # - tcp://docker-host.internal:2375
      reload_interval_seconds: 60
      # use_ipv4: 192.0.2.10

  - module: etc-hosts  # EtcHosts plugin alias
    config:
      files:
        - /etc/hosts
      watchdog_enabled: true
      ttl: 900 # 15 minutes, default is 300
